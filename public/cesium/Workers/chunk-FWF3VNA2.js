import{a as t,b as a,d as i}from"./chunk-KWAHJ72S.js";import{a as e}from"./chunk-MKDADUG3.js";import{b as n}from"./chunk-NOIUI5SY.js";import{e as s}from"./chunk-XRRBRTKL.js";function h(t,a,i,e,n,s,h){let r=t*i*(4+t*(4-3*i))/16;return(1-r)*t*a*(e+r*n*(h+r*s*(2*h*h-1)))}var r=new t,d=new t;function o(i,s,o,u){let c,l,M,_,g,p,f,m,v,H,O,S,b,q,U,A,R,w,j,y,D,I,P,T,k=t.normalize(u.cartographicToCartesian(s,d),r),x=t.normalize(u.cartographicToCartesian(o,d),d);n.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(t.angleBetween(k,x))-Math.PI),.0125),function(t,a,i,n,s,r,d){let o=(a-i)/a,u=r-n,c=Math.atan((1-o)*Math.tan(s)),l=Math.atan((1-o)*Math.tan(d)),M=Math.cos(c),_=Math.sin(c),g=Math.cos(l),p=Math.sin(l),f=M*g,m=M*p,v=_*p,H=_*g,O=u,S=e.TWO_PI,b=Math.cos(O),q=Math.sin(O),U,A,R,w,j;do{let t;b=Math.cos(O),q=Math.sin(O);let a=m-H*b;U=Math.atan2(R=Math.sqrt(g*g*q*q+a*a),A=v+f*b),0===R?(t=0,w=1):w=1-(t=f*q/R)*t,S=O,isFinite(j=A-2*v/w)||(j=0),O=u+h(o,t,w,U,R,A,j)}while(Math.abs(O-S)>e.EPSILON12);let y=w*(a*a-i*i)/(i*i),D=1+y*(4096+y*(y*(320-175*y)-768))/16384,I=y*(256+y*(y*(74-47*y)-128))/1024,P=j*j,T=Math.atan2(g*q,m-H*b),k=Math.atan2(M*q,m*b-H);t._distance=i*D*(U-I*R*(j+I*(A*(2*P-1)-I*j*(4*R*R-3)*(4*P-3)/6)/4)),t._startHeading=T,t._endHeading=k,t._uSquared=y}(i,u.maximumRadius,u.minimumRadius,s.longitude,s.latitude,o.longitude,o.latitude),i._start=a.clone(s,i._start),i._end=a.clone(o,i._end),i._start.height=0,i._end.height=0,c=i._uSquared,_=((l=i._ellipsoid.maximumRadius)-(M=i._ellipsoid.minimumRadius))/l,g=Math.cos(i._startHeading),p=Math.sin(i._startHeading),v=(m=1/Math.sqrt(1+(f=(1-_)*Math.tan(i._start.latitude))*f))*f,H=Math.atan2(f,g),q=Math.sqrt(b=1-(S=(O=m*p)*O)),R=(A=(U=c/4)*U)*U,w=A*A,j=1+U-3*A/4+5*R/4-175*w/64,y=1-U+15*A/8-35*R/8,D=1-3*U+35*A/4,I=1-5*U,P=j*H-y*Math.sin(2*H)*U/2-D*Math.sin(4*H)*A/16-I*Math.sin(6*H)*R/48-5*Math.sin(8*H)*w/512,(T=i._constants).a=l,T.b=M,T.f=_,T.cosineHeading=g,T.sineHeading=p,T.tanU=f,T.cosineU=m,T.sineU=v,T.sigma=H,T.sineAlpha=O,T.sineSquaredAlpha=S,T.cosineSquaredAlpha=b,T.cosineAlpha=q,T.u2Over4=U,T.u4Over16=A,T.u6Over64=R,T.u8Over256=w,T.a0=j,T.a1=y,T.a2=D,T.a3=I,T.distanceRatio=P}function u(t,e,n){let h=n??i.default;this._ellipsoid=h,this._start=new a,this._end=new a,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,s(t)&&s(e)&&o(this,t,e,h)}Object.defineProperties(u.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return n.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return n.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return n.defined("distance",this._distance),this._endHeading}}}),u.prototype.setEndPoints=function(t,a){n.defined("start",t),n.defined("end",a),o(this,t,a,this._ellipsoid)},u.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},u.prototype.interpolateUsingSurfaceDistance=function(t,i){n.defined("distance",this._distance);let e=this._constants,r=e.distanceRatio+t/e.b,d=Math.cos(2*r),o=Math.cos(4*r),u=Math.cos(6*r),c=Math.sin(2*r),l=Math.sin(4*r),M=Math.sin(6*r),_=Math.sin(8*r),g=r*r,p=e.u8Over256,f=e.u2Over4,m=e.u6Over64,v=e.u4Over16,H=r*g*2*p*d/3+r*(1-f+7*v/4-15*m/4+579*p/64-(v-15*m/4+187*p/16)*d-(5*m/4-115*p/16)*o-29*p*u/16)+(f/2-v+71*m/32-85*p/16)*c+(5*v/16-5*m/4+383*p/96)*l-g*((m-11*p/2)*c+5*p*l/2)+(29*m/96-29*p/16)*M+539*p*_/1536,O=Math.asin(Math.sin(H)*e.cosineAlpha),S=Math.atan(e.a/e.b*Math.tan(O));H-=e.sigma;let b=Math.cos(2*e.sigma+H),q=Math.sin(H),U=Math.cos(H),A=e.cosineU*U,R=e.sineU*q,w=Math.atan2(q*e.sineHeading,A-R*e.cosineHeading)-h(e.f,e.sineAlpha,e.cosineSquaredAlpha,H,q,U,b);return s(i)?(i.longitude=this._start.longitude+w,i.latitude=S,i.height=0,i):new a(this._start.longitude+w,S,0)};var c=u;export{c as a};