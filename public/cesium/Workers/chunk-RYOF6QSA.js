import{a as t}from"./chunk-XQIJGAVD.js";import{i as n,j as a}from"./chunk-UTYWXSQT.js";import{a as r,b as o,d as s}from"./chunk-KWAHJ72S.js";import{a as e}from"./chunk-MKDADUG3.js";import{a as i}from"./chunk-NOIUI5SY.js";import{e as l}from"./chunk-XRRBRTKL.js";var h=Math.cos,u=Math.sin,g=Math.sqrt,c={};c.computePosition=function(t,n,a,r,o,s,e){let i=n.radiiSquared,c=t.nwCorner,S=t.boundingRectangle,d=c.latitude-t.granYCos*r+o*t.granXSin,C=h(d),w=u(d),m=i.z*w,p=c.longitude+r*t.granYSin+o*t.granXCos,X=C*h(p),Y=C*u(p),f=i.x*X,O=i.y*Y,_=g(f*X+O*Y+m*w);if(s.x=f/_,s.y=O/_,s.z=m/_,a){let n=t.stNwCorner;l(n)?(d=n.latitude-t.stGranYCos*r+o*t.stGranXSin,e.x=((p=n.longitude+r*t.stGranYSin+o*t.stGranXCos)-t.stWest)*t.lonScalar,e.y=(d-t.stSouth)*t.latScalar):(e.x=(p-S.west)*t.lonScalar,e.y=(d-S.south)*t.latScalar)}};var S=new a,d=new r,C=new o,w=new r,m=new t;function p(t,n,o,e,i,l,h){let u=Math.cos(n),g=e*u,c=o*u,C=Math.sin(n),p=e*C,X=o*C;m._ellipsoid=s.default,d=m.project(t,d),d=r.subtract(d,w,d);let Y=a.fromRotation(n,S);d=a.multiplyByVector(Y,d,d),d=r.add(d,w,d),t=m.unproject(d,t),l-=1,h-=1;let f=t.latitude,O=f+l*X,_=f-g*h,R=f-g*h+l*X,I=Math.max(f,O,_,R),M=Math.min(f,O,_,R),W=t.longitude,T=W+l*c,j=W+h*p,G=W+h*p+l*c;return{north:I,south:M,east:Math.max(W,T,j,G),west:Math.min(W,T,j,G),granYCos:g,granYSin:p,granXCos:c,granXSin:X,nwCorner:t}}c.computeOptions=function(t,a,r,o,l,h,u){let g=t.east,c=t.west,S=t.north,d=t.south,X=!1,Y=!1;S===e.PI_OVER_TWO&&(X=!0),d===-e.PI_OVER_TWO&&(Y=!0);let f,O=S-d,_=Math.ceil((f=c>g?e.TWO_PI-c+g:g-c)/a)+1,R=Math.ceil(O/a)+1,I=f/(_-1),M=O/(R-1),W=n.northwest(t,h),T=n.center(t,C);(0!==r||0!==o)&&(T.longitude<W.longitude&&(T.longitude+=e.TWO_PI),m._ellipsoid=s.default,w=m.project(T,w));let j=n.clone(t,l),G={granYCos:M,granYSin:0,granXCos:I,granXSin:0,nwCorner:W,boundingRectangle:j,width:_,height:R,northCap:X,southCap:Y};if(0!==r){let t=p(W,r,I,M,T,_,R);if(S=t.north,d=t.south,g=t.east,c=t.west,S<-e.PI_OVER_TWO||S>e.PI_OVER_TWO||d<-e.PI_OVER_TWO||d>e.PI_OVER_TWO)throw new i("Rotated rectangle is invalid.  It crosses over either the north or south pole.");G.granYCos=t.granYCos,G.granYSin=t.granYSin,G.granXCos=t.granXCos,G.granXSin=t.granXSin,j.north=S,j.south=d,j.east=g,j.west=c}if(0!==o){r-=o;let t=n.northwest(j,u),a=p(t,r,I,M,T,_,R);G.stGranYCos=a.granYCos,G.stGranXCos=a.granXCos,G.stGranYSin=a.granYSin,G.stGranXSin=a.granXSin,G.stNwCorner=t,G.stWest=a.west,G.stSouth=a.south}return G};var X=c;export{X as a};