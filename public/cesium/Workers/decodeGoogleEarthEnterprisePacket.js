import{a as e}from"./chunk-D2NFCOGE.js";import{a as t}from"./chunk-5G23AKP3.js";import{b as i}from"./chunk-NOIUI5SY.js";import{c as r,d as n,e as a}from"./chunk-XRRBRTKL.js";var s=r((e,t)=>{"use strict";t.exports=(e,t,i,r)=>{let n=65535&e,a=e>>>16&65535,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do a=a+(n=n+t[r++]|0)|0;while(--s);n%=65521,a%=65521}return n|a<<16}}),o=r((e,t)=>{"use strict";var i=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[i]=e}return t})());t.exports=(e,t,r,n)=>{let a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^i[(e^t[r])&255];return -1^e}}),l=r((e,t)=>{"use strict";t.exports=function(e,t){let i,r,n,a,s,o,l,d,f,h,c,u,w,b,m,g,k,_,p,x,y,v,E,R,A=e.state;i=e.next_in,E=e.input,r=i+(e.avail_in-5),n=e.next_out,R=e.output,a=n-(t-e.avail_out),s=n+(e.avail_out-257),o=A.dmax,l=A.wsize,d=A.whave,f=A.wnext,h=A.window,c=A.hold,u=A.bits,w=A.lencode,b=A.distcode,m=(1<<A.lenbits)-1,g=(1<<A.distbits)-1;e:do for(u<15&&(c+=E[i++]<<u,u+=8,c+=E[i++]<<u,u+=8),k=w[c&m];;){if(c>>>=_=k>>>24,u-=_,0==(_=k>>>16&255))R[n++]=65535&k;else if(16&_)for(p=65535&k,(_&=15)&&(u<_&&(c+=E[i++]<<u,u+=8),p+=c&(1<<_)-1,c>>>=_,u-=_),u<15&&(c+=E[i++]<<u,u+=8,c+=E[i++]<<u,u+=8),k=b[c&g];;){if(c>>>=_=k>>>24,u-=_,16&(_=k>>>16&255)){if(x=65535&k,u<(_&=15)&&(c+=E[i++]<<u,(u+=8)<_&&(c+=E[i++]<<u,u+=8)),(x+=c&(1<<_)-1)>o){e.msg="invalid distance too far back",A.mode=16209;break e}if(c>>>=_,u-=_,x>(_=n-a)){if((_=x-_)>d&&A.sane){e.msg="invalid distance too far back",A.mode=16209;break e}if(y=0,v=h,0===f){if(y+=l-_,_<p){p-=_;do R[n++]=h[y++];while(--_);y=n-x,v=R}}else if(f<_){if(y+=l+f-_,(_-=f)<p){p-=_;do R[n++]=h[y++];while(--_);if(y=0,f<p){p-=_=f;do R[n++]=h[y++];while(--_);y=n-x,v=R}}}else if(y+=f-_,_<p){p-=_;do R[n++]=h[y++];while(--_);y=n-x,v=R}for(;p>2;)R[n++]=v[y++],R[n++]=v[y++],R[n++]=v[y++],p-=3;p&&(R[n++]=v[y++],p>1&&(R[n++]=v[y++]))}else{y=n-x;do R[n++]=R[y++],R[n++]=R[y++],R[n++]=R[y++],p-=3;while(p>2);p&&(R[n++]=R[y++],p>1&&(R[n++]=R[y++]))}}else if((64&_)==0){k=b[(65535&k)+(c&(1<<_)-1)];continue}else{e.msg="invalid distance code",A.mode=16209;break e}break}else if((64&_)==0){k=w[(65535&k)+(c&(1<<_)-1)];continue}else if(32&_){A.mode=16191;break e}else{e.msg="invalid literal/length code",A.mode=16209;break e}break}while(i<r&&n<s);i-=p=u>>3,u-=p<<3,c&=(1<<u)-1,e.next_in=i,e.next_out=n,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=n<s?257+(s-n):257-(n-s),A.hold=c,A.bits=u}}),d=r((e,t)=>{"use strict";var i=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(e,t,s,o,l,d,f,h)=>{let c=h.bits,u=0,w=0,b=0,m=0,g=0,k=0,_=0,p=0,x=0,y=0,v,E,R,A,T,U=null,S,Z=new Uint16Array(16),D=new Uint16Array(16),I=null,O,B,N;for(u=0;u<=15;u++)Z[u]=0;for(w=0;w<o;w++)Z[t[s+w]]++;for(g=c,m=15;m>=1&&0===Z[m];m--);if(g>m&&(g=m),0===m)return l[d++]=0x1400000,l[d++]=0x1400000,h.bits=1,0;for(b=1;b<m&&0===Z[b];b++);for(g<b&&(g=b),p=1,u=1;u<=15;u++)if(p<<=1,(p-=Z[u])<0)return -1;if(p>0&&(0===e||1!==m))return -1;for(D[1]=0,u=1;u<15;u++)D[u+1]=D[u]+Z[u];for(w=0;w<o;w++)0!==t[s+w]&&(f[D[t[s+w]]++]=w);if(0===e?(U=I=f,S=20):1===e?(U=i,I=r,S=257):(U=n,I=a,S=0),y=0,w=0,u=b,T=d,k=g,_=0,R=-1,A=(x=1<<g)-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){O=u-_,f[w]+1<S?(B=0,N=f[w]):f[w]>=S?(B=I[f[w]-S],N=U[f[w]-S]):(B=96,N=0),v=1<<u-_,b=E=1<<k;do l[T+(y>>_)+(E-=v)]=O<<24|B<<16|N;while(0!==E);for(v=1<<u-1;y&v;)v>>=1;if(0!==v?(y&=v-1,y+=v):y=0,w++,0==--Z[u]){if(u===m)break;u=t[s+f[w]]}if(u>g&&(y&A)!==R){for(0===_&&(_=g),T+=b,p=1<<(k=u-_);k+_<m&&!((p-=Z[k+_])<=0);)k++,p<<=1;if(x+=1<<k,1===e&&x>852||2===e&&x>592)return 1;l[R=y&A]=g<<24|k<<16|T-d}}return 0!==y&&(l[T+y]=u-_<<24|4194304),h.bits=g,0}}),f=r((e,t)=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),h=r((e,t)=>{"use strict";var i=s(),r=o(),n=l(),a=d(),{Z_FINISH:h,Z_BLOCK:c,Z_TREES:u,Z_OK:w,Z_STREAM_END:b,Z_NEED_DICT:m,Z_STREAM_ERROR:g,Z_DATA_ERROR:k,Z_MEM_ERROR:_,Z_BUF_ERROR:p,Z_DEFLATED:x}=f(),y=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function v(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var E,R,A=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},T=e=>{if(A(e))return g;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,w},U=e=>{if(A(e))return g;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,T(e)},S=(e,t)=>{let i;if(A(e))return g;let r=e.state;return t<0?(i=0,t=-t):(i=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,U(e))},Z=(e,t)=>{if(!e)return g;let i=new v;e.state=i,i.strm=e,i.window=null,i.mode=16180;let r=S(e,t);return r!==w&&(e.state=null),r},D=!0,I=e=>{if(D){E=new Int32Array(512),R=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,R,0,e.work,{bits:5}),D=!1}e.lencode=E,e.lenbits=9,e.distcode=R,e.distbits=5},O=(e,t,i,r)=>{let n,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):((n=a.wsize-a.wnext)>r&&(n=r),a.window.set(t.subarray(i-r,i-r+n),a.wnext),(r-=n)?(a.window.set(t.subarray(i-r,i),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0};t.exports.inflateReset=U,t.exports.inflateReset2=S,t.exports.inflateResetKeep=T,t.exports.inflateInit=e=>Z(e,15),t.exports.inflateInit2=Z,t.exports.inflate=(e,t)=>{let s,o,l,d,f,v,E,R,T,U,S,Z,D,B,N=0,C,M,L,F,P,z,V,H,j=new Uint8Array(4),K,Y,G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(A(e)||!e.output||!e.input&&0!==e.avail_in)return g;16191===(s=e.state).mode&&(s.mode=16192),f=e.next_out,l=e.output,E=e.avail_out,d=e.next_in,o=e.input,v=e.avail_in,R=s.hold,T=s.bits,U=v,S=E,H=w;e:for(;;)switch(s.mode){case 16180:if(0===s.wrap){s.mode=16192;break}for(;T<16;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(2&s.wrap&&35615===R){0===s.wbits&&(s.wbits=15),s.check=0,j[0]=255&R,j[1]=R>>>8&255,s.check=r(s.check,j,2,0),R=0,T=0,s.mode=16181;break}if(s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&R)<<8)+(R>>8))%31){e.msg="incorrect header check",s.mode=16209;break}if((15&R)!==x){e.msg="unknown compression method",s.mode=16209;break}if(R>>>=4,T-=4,V=(15&R)+8,0===s.wbits&&(s.wbits=V),V>15||V>s.wbits){e.msg="invalid window size",s.mode=16209;break}s.dmax=1<<s.wbits,s.flags=0,e.adler=s.check=1,s.mode=512&R?16189:16191,R=0,T=0;break;case 16181:for(;T<16;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(s.flags=R,(255&s.flags)!==x){e.msg="unknown compression method",s.mode=16209;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=16209;break}s.head&&(s.head.text=R>>8&1),512&s.flags&&4&s.wrap&&(j[0]=255&R,j[1]=R>>>8&255,s.check=r(s.check,j,2,0)),R=0,T=0,s.mode=16182;case 16182:for(;T<32;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.head&&(s.head.time=R),512&s.flags&&4&s.wrap&&(j[0]=255&R,j[1]=R>>>8&255,j[2]=R>>>16&255,j[3]=R>>>24&255,s.check=r(s.check,j,4,0)),R=0,T=0,s.mode=16183;case 16183:for(;T<16;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.head&&(s.head.xflags=255&R,s.head.os=R>>8),512&s.flags&&4&s.wrap&&(j[0]=255&R,j[1]=R>>>8&255,s.check=r(s.check,j,2,0)),R=0,T=0,s.mode=16184;case 16184:if(1024&s.flags){for(;T<16;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.length=R,s.head&&(s.head.extra_len=R),512&s.flags&&4&s.wrap&&(j[0]=255&R,j[1]=R>>>8&255,s.check=r(s.check,j,2,0)),R=0,T=0}else s.head&&(s.head.extra=null);s.mode=16185;case 16185:if(1024&s.flags&&((Z=s.length)>v&&(Z=v),Z&&(s.head&&(V=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(o.subarray(d,d+Z),V)),512&s.flags&&4&s.wrap&&(s.check=r(s.check,o,Z,d)),v-=Z,d+=Z,s.length-=Z),s.length))break e;s.length=0,s.mode=16186;case 16186:if(2048&s.flags){if(0===v)break e;Z=0;do V=o[d+Z++],s.head&&V&&s.length<65536&&(s.head.name+=String.fromCharCode(V));while(V&&Z<v);if(512&s.flags&&4&s.wrap&&(s.check=r(s.check,o,Z,d)),v-=Z,d+=Z,V)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=16187;case 16187:if(4096&s.flags){if(0===v)break e;Z=0;do V=o[d+Z++],s.head&&V&&s.length<65536&&(s.head.comment+=String.fromCharCode(V));while(V&&Z<v);if(512&s.flags&&4&s.wrap&&(s.check=r(s.check,o,Z,d)),v-=Z,d+=Z,V)break e}else s.head&&(s.head.comment=null);s.mode=16188;case 16188:if(512&s.flags){for(;T<16;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(4&s.wrap&&R!==(65535&s.check)){e.msg="header crc mismatch",s.mode=16209;break}R=0,T=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=16191;break;case 16189:for(;T<32;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}e.adler=s.check=y(R),R=0,T=0,s.mode=16190;case 16190:if(0===s.havedict)return e.next_out=f,e.avail_out=E,e.next_in=d,e.avail_in=v,s.hold=R,s.bits=T,m;e.adler=s.check=1,s.mode=16191;case 16191:if(t===c||t===u)break e;case 16192:if(s.last){R>>>=7&T,T-=7&T,s.mode=16206;break}for(;T<3;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}switch(s.last=1&R,T-=1,3&(R>>>=1)){case 0:s.mode=16193;break;case 1:if(I(s),s.mode=16199,t===u){R>>>=2,T-=2;break e}break;case 2:s.mode=16196;break;case 3:e.msg="invalid block type",s.mode=16209}R>>>=2,T-=2;break;case 16193:for(R>>>=7&T,T-=7&T;T<32;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if((65535&R)!=(R>>>16^65535)){e.msg="invalid stored block lengths",s.mode=16209;break}if(s.length=65535&R,R=0,T=0,s.mode=16194,t===u)break e;case 16194:s.mode=16195;case 16195:if(Z=s.length){if(Z>v&&(Z=v),Z>E&&(Z=E),0===Z)break e;l.set(o.subarray(d,d+Z),f),v-=Z,d+=Z,E-=Z,f+=Z,s.length-=Z;break}s.mode=16191;break;case 16196:for(;T<14;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(s.nlen=(31&R)+257,T-=5,s.ndist=(31&(R>>>=5))+1,T-=5,s.ncode=(15&(R>>>=5))+4,R>>>=4,T-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=16209;break}s.have=0,s.mode=16197;case 16197:for(;s.have<s.ncode;){for(;T<3;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.lens[G[s.have++]]=7&R,R>>>=3,T-=3}for(;s.have<19;)s.lens[G[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,K={bits:s.lenbits},H=a(0,s.lens,0,19,s.lencode,0,s.work,K),s.lenbits=K.bits,H){e.msg="invalid code lengths set",s.mode=16209;break}s.have=0,s.mode=16198;case 16198:for(;s.have<s.nlen+s.ndist;){for(;C=(N=s.lencode[R&(1<<s.lenbits)-1])>>>24,M=N>>>16&255,L=65535&N,!(C<=T);){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(L<16)R>>>=C,T-=C,s.lens[s.have++]=L;else{if(16===L){for(Y=C+2;T<Y;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(R>>>=C,T-=C,0===s.have){e.msg="invalid bit length repeat",s.mode=16209;break}V=s.lens[s.have-1],Z=3+(3&R),R>>>=2,T-=2}else if(17===L){for(Y=C+3;T<Y;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}R>>>=C,T-=C,V=0,Z=3+(7&R),R>>>=3,T-=3}else{for(Y=C+7;T<Y;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}R>>>=C,T-=C,V=0,Z=11+(127&R),R>>>=7,T-=7}if(s.have+Z>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=16209;break}for(;Z--;)s.lens[s.have++]=V}}if(16209===s.mode)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=16209;break}if(s.lenbits=9,K={bits:s.lenbits},H=a(1,s.lens,0,s.nlen,s.lencode,0,s.work,K),s.lenbits=K.bits,H){e.msg="invalid literal/lengths set",s.mode=16209;break}if(s.distbits=6,s.distcode=s.distdyn,K={bits:s.distbits},H=a(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,K),s.distbits=K.bits,H){e.msg="invalid distances set",s.mode=16209;break}if(s.mode=16199,t===u)break e;case 16199:s.mode=16200;case 16200:if(v>=6&&E>=258){e.next_out=f,e.avail_out=E,e.next_in=d,e.avail_in=v,s.hold=R,s.bits=T,n(e,S),f=e.next_out,l=e.output,E=e.avail_out,d=e.next_in,o=e.input,v=e.avail_in,R=s.hold,T=s.bits,16191===s.mode&&(s.back=-1);break}for(s.back=0;C=(N=s.lencode[R&(1<<s.lenbits)-1])>>>24,M=N>>>16&255,L=65535&N,!(C<=T);){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(M&&(240&M)==0){for(F=C,P=M,z=L;C=(N=s.lencode[z+((R&(1<<F+P)-1)>>F)])>>>24,M=N>>>16&255,L=65535&N,!(F+C<=T);){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}R>>>=F,T-=F,s.back+=F}if(R>>>=C,T-=C,s.back+=C,s.length=L,0===M){s.mode=16205;break}if(32&M){s.back=-1,s.mode=16191;break}if(64&M){e.msg="invalid literal/length code",s.mode=16209;break}s.extra=15&M,s.mode=16201;case 16201:if(s.extra){for(Y=s.extra;T<Y;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.length+=R&(1<<s.extra)-1,R>>>=s.extra,T-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=16202;case 16202:for(;C=(N=s.distcode[R&(1<<s.distbits)-1])>>>24,M=N>>>16&255,L=65535&N,!(C<=T);){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if((240&M)==0){for(F=C,P=M,z=L;C=(N=s.distcode[z+((R&(1<<F+P)-1)>>F)])>>>24,M=N>>>16&255,L=65535&N,!(F+C<=T);){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}R>>>=F,T-=F,s.back+=F}if(R>>>=C,T-=C,s.back+=C,64&M){e.msg="invalid distance code",s.mode=16209;break}s.offset=L,s.extra=15&M,s.mode=16203;case 16203:if(s.extra){for(Y=s.extra;T<Y;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}s.offset+=R&(1<<s.extra)-1,R>>>=s.extra,T-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=16209;break}s.mode=16204;case 16204:if(0===E)break e;if(Z=S-E,s.offset>Z){if((Z=s.offset-Z)>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=16209;break}Z>s.wnext?(Z-=s.wnext,D=s.wsize-Z):D=s.wnext-Z,Z>s.length&&(Z=s.length),B=s.window}else B=l,D=f-s.offset,Z=s.length;Z>E&&(Z=E),E-=Z,s.length-=Z;do l[f++]=B[D++];while(--Z);0===s.length&&(s.mode=16200);break;case 16205:if(0===E)break e;l[f++]=s.length,E--,s.mode=16200;break;case 16206:if(s.wrap){for(;T<32;){if(0===v)break e;v--,R|=o[d++]<<T,T+=8}if(S-=E,e.total_out+=S,s.total+=S,4&s.wrap&&S&&(e.adler=s.check=s.flags?r(s.check,l,S,f-S):i(s.check,l,S,f-S)),S=E,4&s.wrap&&(s.flags?R:y(R))!==s.check){e.msg="incorrect data check",s.mode=16209;break}R=0,T=0}s.mode=16207;case 16207:if(s.wrap&&s.flags){for(;T<32;){if(0===v)break e;v--,R+=o[d++]<<T,T+=8}if(4&s.wrap&&R!==(0|s.total)){e.msg="incorrect length check",s.mode=16209;break}R=0,T=0}s.mode=16208;case 16208:H=b;break e;case 16209:H=k;break e;case 16210:return _;default:return g}return e.next_out=f,e.avail_out=E,e.next_in=d,e.avail_in=v,s.hold=R,s.bits=T,(s.wsize||S!==e.avail_out&&s.mode<16209&&(s.mode<16206||t!==h))&&O(e,e.output,e.next_out,S-e.avail_out)?(s.mode=16210,_):(U-=e.avail_in,S-=e.avail_out,e.total_in+=U,e.total_out+=S,s.total+=S,4&s.wrap&&S&&(e.adler=s.check=s.flags?r(s.check,l,S,e.next_out-S):i(s.check,l,S,e.next_out-S)),e.data_type=s.bits+64*!!s.last+128*(16191===s.mode)+256*(16199===s.mode||16194===s.mode),(0===U&&0===S||t===h)&&H===w&&(H=p),H)},t.exports.inflateEnd=e=>{if(A(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,w},t.exports.inflateGetHeader=(e,t)=>{if(A(e))return g;let i=e.state;return(2&i.wrap)==0?g:(i.head=t,t.done=!1,w)},t.exports.inflateSetDictionary=(e,t)=>{let r=t.length,n;return A(e)||0!==(n=e.state).wrap&&16190!==n.mode?g:16190===n.mode&&i(1,t,r,0)!==n.check?k:O(e,t,r,r)?(n.mode=16210,_):(n.havedict=1,w)},t.exports.inflateInfo="pako inflate (from Nodeca project)"}),c=r((e,t)=>{"use strict";var i=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);t.exports.assign=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)i(r,t)&&(e[t]=r[t])}}return e},t.exports.flattenChunks=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;let i=new Uint8Array(t);for(let t=0,r=0,n=e.length;t<n;t++){let n=e[t];i.set(n,r),r+=n.length}return i}}),u=r((e,t)=>{"use strict";var i=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}var r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,t.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,i,r,n,a,s=e.length,o=0;for(n=0;n<s;n++)(64512&(i=e.charCodeAt(n)))==55296&&n+1<s&&(64512&(r=e.charCodeAt(n+1)))==56320&&(i=65536+(i-55296<<10)+(r-56320),n++),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(o),a=0,n=0;a<o;n++)(64512&(i=e.charCodeAt(n)))==55296&&n+1<s&&(64512&(r=e.charCodeAt(n+1)))==56320&&(i=65536+(i-55296<<10)+(r-56320),n++),i<128?t[a++]=i:(i<2048?t[a++]=192|i>>>6:(i<65536?t[a++]=224|i>>>12:(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63),t[a++]=128|i>>>6&63),t[a++]=128|63&i);return t},t.exports.buf2string=(e,t)=>{let n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,s,o=Array(2*n);for(s=0,a=0;a<n;){let t=e[a++];if(t<128){o[s++]=t;continue}let i=r[t];if(i>4){o[s++]=65533,a+=i-1;continue}for(t&=2===i?31:3===i?15:7;i>1&&a<n;)t=t<<6|63&e[a++],i--;if(i>1){o[s++]=65533;continue}t<65536?o[s++]=t:(t-=65536,o[s++]=55296|t>>10&1023,o[s++]=56320|1023&t)}var l=s;if(l<65534&&o.subarray&&i)return String.fromCharCode.apply(null,o.length===l?o:o.subarray(0,l));let d="";for(let e=0;e<l;e++)d+=String.fromCharCode(o[e]);return d},t.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&(192&e[i])==128;)i--;return i<0||0===i?t:i+r[e[i]]>t?i:t}}),w=r((e,t)=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),b=r((e,t)=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}),m=r((e,t)=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}),g=r((e,t)=>{"use strict";var i=h(),r=c(),n=u(),a=w(),s=b(),o=m(),l=Object.prototype.toString,{Z_NO_FLUSH:d,Z_FINISH:g,Z_OK:k,Z_STREAM_END:_,Z_NEED_DICT:p,Z_STREAM_ERROR:x,Z_DATA_ERROR:y,Z_MEM_ERROR:v}=f();function E(e){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let d=i.inflateInit2(this.strm,t.windowBits);if(d!==k||(this.header=new o,i.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=n.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(d=i.inflateSetDictionary(this.strm,t.dictionary))!==k)))throw Error(a[d])}function R(e,t){let i=new E(t);if(i.push(e),i.err)throw i.msg||a[i.err];return i.result}E.prototype.push=function(e,t){let r=this.strm,a=this.options.chunkSize,s=this.options.dictionary,o,f,h;if(this.ended)return!1;for(f=t===~~t?t:!0===t?g:d,"[object ArrayBuffer]"===l.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),(o=i.inflate(r,f))===p&&s&&((o=i.inflateSetDictionary(r,s))===k?o=i.inflate(r,f):o===y&&(o=p));r.avail_in>0&&o===_&&r.state.wrap>0&&0!==e[r.next_in];)i.inflateReset(r),o=i.inflate(r,f);switch(o){case x:case y:case p:case v:return this.onEnd(o),this.ended=!0,!1}if(h=r.avail_out,r.next_out&&(0===r.avail_out||o===_))if("string"===this.options.to){let e=n.utf8border(r.output,r.next_out),t=r.next_out-e,i=n.buf2string(r.output,e);r.next_out=t,r.avail_out=a-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==k||0!==h){if(o===_)return o=i.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},E.prototype.onData=function(e){this.chunks.push(e)},E.prototype.onEnd=function(e){e===k&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=E,t.exports.inflate=R,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,R(e,t)},t.exports.ungzip=R,t.exports.constants=f()});function k(e,r){if(k.passThroughDataForTesting)return r;i.typeOf.object("key",e),i.typeOf.object("data",r);let n=e.byteLength;if(0===n||n%4!=0)throw new t("The length of key must be greater than 0 and a multiple of 4.");let a=new DataView(r),s=a.getUint32(0,!0);if(0x7468dead===s||0xadde6874===s)return r;let o=new DataView(e),l=0,d=r.byteLength,f=d-d%8,h,c=8;for(;l<f;)for(h=c=(c+8)%24;l<f&&h<n;)a.setUint32(l,a.getUint32(l,!0)^o.getUint32(h,!0),!0),a.setUint32(l+4,a.getUint32(l+4,!0)^o.getUint32(h+4,!0),!0),l+=8,h+=24;if(l<d)for(h>=n&&(h=c=(c+8)%24);l<d;)a.setUint8(l,a.getUint8(l)^o.getUint8(h)),l++,h++}k.passThroughDataForTesting=!1;var _=function(e,t){return(e&t)!=0},p=[1,2,4,8];function x(e,t,i,r,n,a){this._bits=e,this.cnodeVersion=t,this.imageryVersion=i,this.terrainVersion=r,this.imageryProvider=n,this.terrainProvider=a,this.ancestorHasTerrain=!1,this.terrainState=void 0}x.clone=function(e,t){return a(t)?(t._bits=e._bits,t.cnodeVersion=e.cnodeVersion,t.imageryVersion=e.imageryVersion,t.terrainVersion=e.terrainVersion,t.imageryProvider=e.imageryProvider,t.terrainProvider=e.terrainProvider):t=new x(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),t.ancestorHasTerrain=e.ancestorHasTerrain,t.terrainState=e.terrainState,t},x.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},x.prototype.hasSubtree=function(){return _(this._bits,16)},x.prototype.hasImagery=function(){return _(this._bits,64)},x.prototype.hasTerrain=function(){return _(this._bits,128)},x.prototype.hasChildren=function(){return _(this._bits,15)},x.prototype.hasChild=function(e){return _(this._bits,p[e])},x.prototype.getChildBitmask=function(){return 15&this._bits};var y=n(g(),1),v=Uint16Array.BYTES_PER_ELEMENT,E=Int32Array.BYTES_PER_ELEMENT,R=Uint32Array.BYTES_PER_ELEMENT,A={METADATA:0,TERRAIN:1,DBROOT:2};A.fromString=function(e){return"Metadata"===e?A.METADATA:"Terrain"===e?A.TERRAIN:"DbRoot"===e?A.DBROOT:void 0};var T=e(function(e,i){let r=A.fromString(e.type),n=e.buffer;k(e.key,n);let a=function(e){let i=new DataView(e),r=0,n=i.getUint32(r,!0);if(r+=R,0x7468dead!==n&&0xadde6874!==n)throw new t("Invalid magic");let a=i.getUint32(r,0x7468dead===n),s=new Uint8Array(e,r+=R),o=y.default.inflate(s);if(o.length!==a)throw new t("Size of packet doesn't match header");return o}(n);n=a.buffer;let s=a.length;switch(r){case A.METADATA:return function(e,i,r){let n=new DataView(e),a=0,s=n.getUint32(a,!0);if(a+=R,32301!==s)throw new t("Invalid magic");let o=n.getUint32(a,!0);if(a+=R,1!==o)throw new t("Invalid data type. Must be 1 for QuadTreePacket");let l=n.getUint32(a,!0);if(a+=R,2!==l)throw new t("Invalid QuadTreePacket version. Only version 2 is supported.");let d=n.getInt32(a,!0);a+=E;let f=n.getInt32(a,!0);if(a+=E,32!==f)throw new t("Invalid instance size.");let h=n.getInt32(a,!0);a+=E;let c=n.getInt32(a,!0);a+=E;let u=n.getInt32(a,!0);if(h!==d*f+(a+=E))throw new t("Invalid dataBufferOffset");if(h+c+u!==i)throw new t("Invalid packet offsets");let w=[];for(let e=0;e<d;++e){let e=n.getUint8(a);++a,++a;let t=n.getUint16(a,!0);a+=v;let i=n.getUint16(a,!0);a+=v;let r=n.getUint16(a,!0);a+=v,a+=v,a+=v,a+=E,a+=E,a+=8;let s=n.getUint8(a++),o=n.getUint8(a++);a+=v,w.push(new x(e,t,i,r,s,o))}let b=[],m=0,g=0,k=w[m++];return""===r?++g:b[r]=k,function e(t,i,r){let n=!1;if(4===r){if(i.hasSubtree())return;n=!0}for(let a=0;a<4;++a){let s=t+a.toString();if(n)b[s]=null;else if(r<4)if(i.hasChild(a)){if(m===d)return void console.log("Incorrect number of instances");let t=w[m++];b[s]=t,e(s,t,r+1)}else b[s]=null}}(r,k,g),b}(n,s,e.quadKey);case A.TERRAIN:return function(e,i,r){let n=new DataView(e),a=0,s=[];for(;s.length<5;){let o=a;a=function(e){for(let r=0;r<4;++r){let r=n.getUint32(e,!0);if(e+=R,(e+=r)>i)throw new t("Malformed terrain packet found.")}return e}(a);let l=e.slice(o,a);r.push(l),s.push(l)}return s}(n,s,i);case A.DBROOT:return i.push(n),{buffer:n}}});export{T as default};